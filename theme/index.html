<!DOCTYPE html>
<html>
  <head>
    <title>MOTH</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="images/luna-moth.png" sizes="300x300">
    <link rel="icon" href="images/luna-moth.svg" sizes="any">
    <link rel="stylesheet" href="css/moth.css">
    <script type="module" src="scripts/moth.mjs"></script>

    <script type="module">
/*
 * Welcome to kludgetown. Population: you, bro. 
 */

// I can't believe it's 2021 and I still need this
if (window.navigator.userAgent.match(/MSIE|Trident/)) {
  document.body.innerHTML = '<h1>Sorry, this app needs a browser released after 2011</h1><a href="https://www.engadget.com/2019-02-08-microsoft-internet-explorer-technical-debt.html">More info</a>'
}

// Polyfill for dialog element. 
// Check https://caniuse.com/dialog to see if we can remove this yet. -->
import("https://cdn.jsdelivr.net/npm/dialog-polyfill@0.5.6/dist/dialog-polyfill.esm.min.js")
.then((dialogPolyfill) => {
  for (let e of document.querySelectorAll("dialog")) {
    dialogPolyfill.default.registerDialog(e)
  }
})
    </script>
  </head>
  <body>
    <h1 id="title">MOTH</h1>
    <section id="app">
      <div id="toasts"></div>
      <div id="messages"></div>
      <form id="login">
        <p>
          Participant ID: <input name="pid" data-propogate="true">
        </p>
        <p>
          Team Name: <input name="name">
        </p>
        <p>
          Team ID: <input name="id">
        </p>
        <p>
          <button>Log In</button>
        </p>
      </form>
      <div id="content">
        <button class="fullscreen" name="full screen">‚õ∂</button>
        <h2>Please Select a Puzzle</h2>
        <iframe class="puzzle" srcdoc="No puzzle has been selected."></iframe>
        <form class="answer">
          Answer: <input id="answer" name="answer">
          <span id="answer_ok"></span>
          <button class="submit">Submit</button>
          <button class="puzzle_info" title="Puzzle Information">‚ÑπÔ∏è</button>
        </form>
      </div>
      <div id="devel">
        <dl class="fields"></dl>
        <h5>
          This debugging section is not displayed in production.
          The production server does not provide answers or other sensitive fields to the client.
        </h5>
      </div>

      <div id="puzzles">
        <div id="puzzleslist"></div>
        <canvas id="updatetimer" title="update countdown" width=40 height=40></canvas>
        <button class="logout" title="Log out">‚ûúüö™</button>
      </div>
    </section>

    <dialog id="puzzle_info"></dialog>

    <template id="workspace">
      <div class="editor">
        <div class="linenos"></div>
        <div class="text"></div>
      </div>
      <div class="controls">
        <button class="run">Run</button>
        <span class="status">Execution time: 0.03s</span>
        <button class="revert" title="Reset code to original">Revert</button>
      </div>
      <div class="output">
        <div class="stdout"></div>
        <div class="stderr"></div>
        <div class="traceback"></div>
        <div class="stdinfo"></div>
      </div>
    </template>
    
  </body>
</html>
