#! /usr/bin/python3

import moth
import os
import io

def make(puzzle):
    puzzle.authors = ["neale"]
    answer = puzzle.make_answer()
    _ = puzzle.make_answer()
    _ = puzzle.make_answer(7)
    puzzle.attach_file("moo.txt")
    puzzle.attach("moo2.txt", io.BytesIO(b"moo moo"))

    puzzle.body.write("<p>It may look the same, but this one is generated by Python!</p>")
    puzzle.body.write('''
<pre><code class="language-python"># Hello!
for fn in ("moo.txt", "moo2.txt"):
    print(fn, ":", open(fn).read())
setanswer("{answer}")
</code></pre>
'''.format(answer=answer))

    puzzle.log("The random seed is %s" % os.getenv("SEED"))
    puzzle.log("When the development server starts, the first thing it logs is this seed.")
    puzzle.log("We make sure to always build puzzles with the same seed for an event")
    puzzle.log("This way, if we have to rebuild a category,")
    puzzle.log("the generated stuff will all (hopefully) be built with the same random numbers.")


moth.mkpuzzle(make)
